{% extends 'base.html' %} {% from "_form_macros.html" import render_field %} {%
block content %}
<link
  rel="stylesheet"
  href="{{ url_for('static', filename='css/form_style.css') }}"
/>

<div class="form-wrapper">
  <div class="form-header">
    <h1>Create Public League</h1>
    <p>
      Set up a new public league that will be available for all users to join.
    </p>
  </div>

  <form
    method="POST"
    action="{{ url_for('admin.create_public_league') }}"
    novalidate
  >
    {{ form.hidden_tag() }}

    <!-- League Information Section -->
    <div class="form-section">
      <div class="form-section-header">
        <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
          ></path>
        </svg>
        <div>
          <h2>League Information</h2>
          <p>Basic details about your fantasy league</p>
        </div>
      </div>
      <div class="form-grid">
        {{ render_field(form.name, class="form-input") }}
        <div class="form-grid two-col">
          {{ render_field(form.tour, class="form-input") }} {{
          render_field(form.player_bucket_id, class="form-input") }}
        </div>
      </div>
    </div>

    <!-- Financial Settings Section -->
    <div class="form-section">
      <div class="form-section-header">
        <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 10v-1m0-6H9.401M14.599 12H15m0 0a3 3 0 10-3-3m3 3a3 3 0 11-3 3"
          ></path>
        </svg>
        <div>
          <h2>Financial Settings</h2>
          <p>Configure entry fees and prize distribution</p>
        </div>
      </div>
      <div class="form-grid two-col">
        {{ render_field(form.entry_fee, class="form-input") }} {{
        render_field(form.max_entries, class="form-input") }} {{
        render_field(form.prize_amount, class="form-input") }} {{
        render_field(form.odds_limit, class="form-input") }}
      </div>
    </div>

    <!-- League Rules & Details Section -->
    <div class="form-section">
      <div class="form-section-header">
        <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
          ></path>
        </svg>
        <div>
          <h2>League Rules & Details</h2>
          <p>Customize your league rules and prize structure</p>
        </div>
      </div>
      <div class="form-grid">
        {{ render_field(form.prize_details, class="form-input", rows="4") }} {{
        render_field(form.rules, class="form-input", rows="4") }}
        <div class="toggle-switch">
          <div class="label-group">
            <label for="no_favorites_rule">Enforce No Favourites Rule</label>
            <p>Prevents players from selecting highly favored golfers</p>
          </div>
          {{ form.no_favorites_rule() }}
          <label for="no_favorites_rule" class="slider"></label>
        </div>
      </div>
    </div>

    <div class="form-actions">
      {{ form.submit(class="btn btn-primary btn-block",style=" width:
      -webkit-fill-available;") }}
    </div>
  </form>
</div>

<script>
  function validateFee(input) {
    const warning = document.getElementById("fee-warning");
    const value = parseFloat(input.value);
    if (value > 0 && value < 5) {
      warning.style.display = "block";
    } else {
      warning.style.display = "none";
    }
  }
</script>
{% endblock %}
