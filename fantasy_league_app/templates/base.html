<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="apple-touch-icon" href="/static/images/icon-180x180.png" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="Fantasy Fairways" />
    <meta name="csrf-token" content="{{ csrf_token() }}" />
    <title>Fantasy Fairways</title>
    <!-- Add Google Fonts Link -->

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/gh/lipis/flag-icons@7.2.3/css/flag-icons.min.css"
    />
    <link
      rel="manifest"
      href="{{ url_for('static', filename='manifest.json') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/style.css') }}"
    />
    <link
      href="{{ url_for('static', filename='css/fa/css/fontawesome.css') }}"
      rel="stylesheet"
    />
    <link
      href="{{ url_for('static', filename='css/fa/css/brands.css') }}"
      rel="stylesheet"
    />
    <link
      href="{{ url_for('static', filename='css/fa/css/solid.css') }}"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/SharedSections/tee-times.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/player_analytics.css') }}"
    />
    <script
      type="module"
      src="{{ url_for('static', filename='js/player-analytics.js') }}"
    ></script>
    <script
      type="module"
      src="{{ url_for('static', filename='js/tee-times.js') }}"
    ></script>

    <script
      type="module"
      src="{{ url_for('static', filename='js/main.js') }}"
    ></script>
    <script
      type="module"
      src="{{ url_for('static', filename='js/push-notifications.js') }}"
    ></script>

    <!-- Professional Toast Notification Styles -->
    <style>
      /* Toast Container - Fixed positioning for visibility */
      .toast-container {
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 9999;
        max-width: 400px;
        width: 100%;
        pointer-events: none;
      }

      /* Individual Toast Styling */
      .toast {
        background: white;
        border-radius: 8px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
        margin-bottom: 12px;
        overflow: hidden;
        transform: translateX(100%);
        opacity: 0;
        transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        pointer-events: auto;
        border-left: 4px solid #e5e7eb;
        max-width: 100%;
        position: relative;
      }

      .toast.show {
        transform: translateX(0);
        opacity: 1;
      }

      /* Toast Content */
      .toast__content {
        padding: 16px 20px;
        display: flex;
        align-items: flex-start;
        gap: 12px;
      }

      .toast__icon {
        flex-shrink: 0;
        width: 20px;
        height: 20px;
        margin-top: 2px;
      }

      .toast__message {
        margin: 0;
        font-size: 14px;
        line-height: 1.5;
        color: #374151;
        font-weight: 500;
        flex: 1;
        word-wrap: break-word;
      }

      .toast__close {
        position: absolute;
        top: 8px;
        right: 8px;
        background: none;
        border: none;
        font-size: 18px;
        color: #9ca3af;
        cursor: pointer;
        padding: 4px;
        border-radius: 4px;
        transition: all 0.2s ease;
        width: 24px;
        height: 24px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .toast__close:hover {
        background: rgba(0, 0, 0, 0.05);
        color: #6b7280;
      }

      /* Success Toast */
      .toast--success {
        border-left-color: #10b981;
      }

      .toast--success .toast__icon {
        color: #10b981;
      }

      /* Error/Danger Toast */
      .toast--danger,
      .toast--error {
        border-left-color: #ef4444;
      }

      .toast--danger .toast__icon,
      .toast--error .toast__icon {
        color: #ef4444;
      }

      /* Warning Toast */
      .toast--warning {
        border-left-color: #f59e0b;
      }

      .toast--warning .toast__icon {
        color: #f59e0b;
      }

      /* Info Toast */
      .toast--info {
        border-left-color: #3b82f6;
      }

      .toast--info .toast__icon {
        color: #3b82f6;
      }

      /* Progress Bar */
      .toast__progress {
        position: absolute;
        bottom: 0;
        left: 0;
        height: 3px;
        background: rgba(0, 0, 0, 0.1);
        width: 100%;
        transition: width linear;
      }

      .toast--success .toast__progress {
        background: #10b981;
      }

      .toast--danger .toast__progress,
      .toast--error .toast__progress {
        background: #ef4444;
      }

      .toast--warning .toast__progress {
        background: #f59e0b;
      }

      .toast--info .toast__progress {
        background: #3b82f6;
      }

      /* Modal Overlay - Proper centering */
      .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.6);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 1000;
        padding: 20px;
      }

      .modal-overlay.hidden {
        display: none;
      }
      /* Modal Overlay - Proper centering */
      .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.6);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 1000;
        padding: 20px;
      }

      .modal-overlay.hidden {
        display: none;
      }

      /* Modal Container - Responsive sizing and scrolling */
      .modal {
        background: white;
        border-radius: 12px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
        width: 100%;
        max-width: 480px;
        max-height: 90vh; /* Never exceed 90% of viewport height */
        display: flex;
        flex-direction: column;
        animation: modalSlideIn 0.3s ease-out;
      }

      @keyframes modalSlideIn {
        from {
          opacity: 0;
          transform: scale(0.9) translateY(-20px);
        }
        to {
          opacity: 1;
          transform: scale(1) translateY(0);
        }
      }

      /* Modal Header - Fixed at top */
      .modal-header {
        padding: 24px 24px 0 24px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-shrink: 0; /* Don't shrink */
      }

      .modal-header h3 {
        font-size: 20px;
        font-weight: 600;
        color: #1f2937;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      /* Modal Subtitle */
      .modal-subtitle {
        padding: 8px 24px 0 24px;
        color: #6b7280;
        font-size: 14px;
        line-height: 1.5;
        flex-shrink: 0; /* Don't shrink */
      }

      /* Modal Body - Scrollable content */
      .modal-body {
        padding: 24px;
        overflow-y: auto; /* Allow scrolling if content is too tall */
        flex: 1; /* Take remaining space */
      }

      /* Modal Footer - Fixed at bottom */
      .modal-footer {
        padding: 20px 24px 24px 24px;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        gap: 12px;
        border-top: 1px solid #f3f4f6;
        flex-shrink: 0; /* Don't shrink */
      }

      /* Sub Link */
      .modal-sub-link {
        text-align: center;
        padding: 0 24px 24px 24px;
        font-size: 13px;
        color: #6b7280;
        flex-shrink: 0; /* Don't shrink */
      }

      /* Close Button Styling */
      .close-btn {
        background: none;
        border: none;
        font-size: 24px;
        color: #9ca3af;
        cursor: pointer;
        padding: 4px;
        border-radius: 4px;
        transition: all 0.2s ease;
        width: 32px;
        height: 32px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .close-btn:hover {
        background: #f3f4f6;
        color: #6b7280;
      }

      .btn-outline:hover {
        background: #f9fafb;
        border-color: #9ca3af;
      }

      .btn-primary {
        background: #059669;
        color: white;
      }

      .btn-primary:hover {
        background: #047857;
      }

      /* Mobile Responsive */
      @media (max-width: 640px) {
        .modal-overlay {
          padding: 16px;
        }

        .modal {
          max-height: 95vh; /* More height on mobile */
        }

        .modal-header {
          padding: 20px 20px 0 20px;
        }

        .modal-subtitle {
          padding: 8px 20px 0 20px;
        }

        .modal-body {
          padding: 20px;
        }

        .modal-footer {
          padding: 16px 20px 20px 20px;
          flex-direction: column; /* Stack buttons vertically on mobile */
        }

        .btn {
          padding: 14px 20px;
        }

        .modal-sub-link {
          padding: 0 20px 20px 20px;
        }
      }

      /* Mobile Responsive */
      @media (max-width: 640px) {
        .modal-overlay {
          padding: 16px;
        }

        .modal {
          max-height: 95vh; /* More height on mobile */
        }

        .modal-header {
          padding: 20px 20px 0 20px;
        }

        .modal-subtitle {
          padding: 8px 20px 0 20px;
        }

        .modal-body {
          padding: 20px;
        }

        .modal-footer {
          padding: 16px 20px 20px 20px;
          flex-direction: column; /* Stack buttons vertically on mobile */
        }

        .btn {
          padding: 14px 20px;
        }

        .modal-sub-link {
          padding: 0 20px 20px 20px;
        }
      }

      /* Mobile Responsive */
      @media (max-width: 768px) {
        .toast-container {
          top: 10px;
          right: 10px;
          left: 10px;
          max-width: none;
        }

        .toast__content {
          padding: 14px 16px;
        }

        .toast__message {
          font-size: 13px;
        }
      }

      /* Dark mode support */
      @media (prefers-color-scheme: dark) {
        .toast {
          background: #1f2937;
          color: #f3f4f6;
        }

        .toast__message {
          color: #f3f4f6;
        }

        .toast__close {
          color: #9ca3af;
        }

        .toast__close:hover {
          background: rgba(255, 255, 255, 0.1);
          color: #d1d5db;
        }
      }
    </style>

    {% block head %}{% endblock %}
  </head>
  <body>
    {% block content %}{% endblock %}

    <div class="page-wrapper fade-in-section"></div>
    <div id="mobile-menu-overlay" class="mobile-menu-overlay"></div>

    <!-- Professional Toast Container -->
    <div class="toast-container" id="toast-container">
      {% with messages = get_flashed_messages(with_categories=true) %} {% if
      messages %} {% for category, message in messages %}
      <div class="toast toast--{{ category }}" data-category="{{ category }}">
        <div class="toast__content">
          <div class="toast__icon">
            {% if category == 'success' %}
            <i class="fa-solid fa-check-circle"></i>
            {% elif category == 'danger' or category == 'error' %}
            <i class="fa-solid fa-exclamation-circle"></i>
            {% elif category == 'warning' %}
            <i class="fa-solid fa-exclamation-triangle"></i>
            {% else %}
            <i class="fa-solid fa-info-circle"></i>
            {% endif %}
          </div>
          <p class="toast__message">{{ message }}</p>
        </div>
        <button class="toast__close" aria-label="Close notification">
          &times;
        </button>
        <div class="toast__progress"></div>
      </div>
      {% endfor %} {% endif %} {% endwith %}
    </div>

    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
    <!--      MOBILE NAVIGATION & MENU      -->
    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->

    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
    <!--      JOIN LEAGUE MODAL           -->
    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
    <div class="modal-overlay hidden" id="join-league-overlay">
      <div class="modal" id="join-league-modal">
        <div class="modal-header">
          <h3><i class="fa-solid fa-user-plus"></i> Join League</h3>
          <button class="close-btn" onclick="hideModal()">&times;</button>
        </div>
        <p class="modal-subtitle">
          Enter your league invitation code to join an existing tournament
        </p>
        <div class="modal-body">
          <div class="icon-container">
            <i class="fa-solid fa-trophy"></i>
          </div>
          <form id="join-league-form">
            <div class="input-group">
              <label for="league-code">League Code</label>
              <input
                type="text"
                id="league-code"
                placeholder="Enterleague code (e.g., ABC123)"
              />
            </div>
            <p class="modal-message" id="modal-message"></p>
          </form>
          <div class="info-box">
            <h4>How it works</h4>
            <ul>
              <li>Get your league code from the tournament organizer</li>
              <li>Enter the 6-digit code above</li>
              <li>You'll be added to the league instantly</li>
              <li>Start competing and tracking your progress</li>
            </ul>
          </div>
        </div>
        <div class="modal-footer">
          <button
            type="submit"
            form="join-league-form"
            class="btn btn-primary"
            id="join-league-submit-btn"
          >
            Join League
          </button>
        </div>
        <p class="modal-sub-link">
          Don't have a code? <a href="#">Contact your tournament organizer</a>
        </p>
      </div>
    </div>

    {% include 'components/notification_prompt.html' with context %} {% include
    'components/player_analytics_modal.html' %}

    <!-- Notification Prompt System -->
    {% if current_user.is_authenticated %}
    <div
      id="notification-prompt-overlay"
      class="notification-prompt-overlay"
      style="display: none"
    >
      <div class="notification-prompt-modal">
        <div class="notification-prompt-header">
          <div class="notification-icon">
            <i class="fas fa-bell"></i>
          </div>
          <h3>Stay Updated with Fantasy Golf!</h3>
          <button class="close-prompt" onclick="closeNotificationPrompt()">
            <i class="fas fa-times"></i>
          </button>
        </div>

        <div class="notification-prompt-body">
          <div class="notification-benefits">
            <div class="benefit-item">
              <i class="fas fa-golf-ball"></i>
              <span>Live score updates during tournaments</span>
            </div>
            <div class="benefit-item">
              <i class="fas fa-trophy"></i>
              <span>League results and leaderboard changes</span>
            </div>
            <div class="benefit-item">
              <i class="fas fa-calendar"></i>
              <span>Tournament start reminders</span>
            </div>
            <div class="benefit-item">
              <i class="fas fa-medal"></i>
              <span>Prize and winning notifications</span>
            </div>
          </div>

          <div class="notification-instructions" id="notification-instructions">
            <p>
              Click "Enable Notifications" below to get real-time updates about
              your fantasy golf leagues!
            </p>
          </div>
        </div>

        <div class="notification-prompt-actions">
          <button
            class="btn-enable-notifications"
            id="enable-notifications-btn"
            onclick="enableNotifications()"
          >
            <i class="fas fa-bell"></i>
            <span>Enable Notifications</span>
          </button>
          <button class="btn-maybe-later" onclick="remindMeLater()">
            <span>Maybe Later</span>
          </button>
        </div>
      </div>
    </div>

    <!-- Notification Status Bar -->
    <div
      id="notification-status-bar"
      class="notification-status-bar"
      style="display: none"
    >
      <div class="status-content">
        <div class="status-icon">
          <i class="fas fa-bell-slash" id="status-icon"></i>
        </div>
        <div class="status-text">
          <span id="status-message">Notifications disabled</span>
        </div>
        <button
          class="status-action-btn"
          id="status-action-btn"
          onclick="showNotificationPrompt()"
        >
          Enable
        </button>
      </div>
    </div>

    <!-- Floating Notification Button -->
    <div
      id="floating-notification-btn"
      class="floating-notification-btn"
      style="display: none"
      onclick="showNotificationPrompt()"
    >
      <i class="fas fa-bell"></i>
      <span class="notification-pulse"></span>
    </div>
    {% endif %}

    <!-- Add the CSS -->
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/notification-prompt.css') }}"
    />

    <!-- Add the JavaScript -->
    <script>
      // Simple notification prompt integration
      function initializeNotificationPrompts() {
        // Wait for existing push manager
        const checkPushManager = setInterval(() => {
          if (window.pushManager) {
            clearInterval(checkPushManager);
            setupNotificationUI();
          }
        }, 100);

        function setupNotificationUI() {
          updateNotificationStatus();
          setInterval(updateNotificationStatus, 5000);

          // Auto-show prompt after delay if needed
          setTimeout(() => {
            if (
              Notification.permission === "default" &&
              !localStorage.getItem("notificationPromptDismissedUntil")
            ) {
              showNotificationPrompt();
            }
          }, 3000);
        }

        function updateNotificationStatus() {
          const statusBar = document.getElementById("notification-status-bar");
          const floatingBtn = document.getElementById(
            "floating-notification-btn"
          );

          if (!statusBar || !floatingBtn) return;

          const permission = Notification.permission;
          const isSubscribed =
            window.pushManager?.getSubscriptionStatus() || false;

          if (permission === "granted" && isSubscribed) {
            statusBar.style.display = "none";
            floatingBtn.style.display = "none";
          } else if (permission === "denied") {
            statusBar.style.display = "none";
            floatingBtn.style.display = "none";
          } else {
            const dismissed = localStorage.getItem(
              "notificationPromptDismissedUntil"
            );
            const shouldShow = !dismissed || new Date() > new Date(dismissed);

            statusBar.style.display = shouldShow ? "block" : "none";
            floatingBtn.style.display = shouldShow ? "flex" : "none";
          }
        }

        // Make functions global for onclick handlers
        window.updateNotificationStatus = updateNotificationStatus;
      }

      // Global functions for your HTML onclick handlers
      function showNotificationPrompt() {
        const overlay = document.getElementById("notification-prompt-overlay");
        if (overlay) overlay.style.display = "flex";
      }

      function closeNotificationPrompt() {
        const overlay = document.getElementById("notification-prompt-overlay");
        if (overlay) overlay.style.display = "none";
      }

      function enableNotifications() {
        if (window.pushManager?.requestPermission) {
          window.pushManager.requestPermission().then(() => {
            closeNotificationPrompt();
            window.updateNotificationStatus();
          });
        }
      }

      function remindMeLater() {
        const dismissUntil = new Date();
        dismissUntil.setHours(dismissUntil.getHours() + 24);
        localStorage.setItem(
          "notificationPromptDismissedUntil",
          dismissUntil.toISOString()
        );
        closeNotificationPrompt();
        window.updateNotificationStatus();
      }

      // Initialize
      document.addEventListener("DOMContentLoaded", () => {
        setTimeout(initializeNotificationPrompts, 1000);
      });
    </script>
  </body>
</html>

<script>
  function toggleDropdown() {
    document.getElementById("myDropdown").classList.toggle("show");
  }
  // Close dropdown if clicking outside
  window.onclick = function (event) {
    if (!event.target.matches(".dropdown-button")) {
      var dropdowns = document.getElementsByClassName("dropdown-content");
      for (var i = 0; i < dropdowns.length; i++) {
        var openDropdown = dropdowns[i];
        if (openDropdown.classList.contains("show")) {
          openDropdown.classList.remove("show");
        }
      }
    }
  };

  document.addEventListener("DOMContentLoaded", function () {
    const toggler = document.getElementById("navbar-toggler-btn");
    const linksContainer = document.getElementById("navbar-links-container");

    if (toggler && linksContainer) {
      toggler.addEventListener("click", function () {
        linksContainer.classList.toggle("is-active");
        toggler.classList.toggle("is-active");
      });
    }
  });

  // --- Professional Toast Notification Logic ---
  document.addEventListener("DOMContentLoaded", () => {
    const toasts = document.querySelectorAll(".toast");
    const TOAST_DURATION = 6000; // 6 seconds

    function createToastManager(toast, index) {
      const progressBar = toast.querySelector(".toast__progress");
      const closeButton = toast.querySelector(".toast__close");

      let isHovered = false;
      let isPaused = false;
      let timeRemaining = TOAST_DURATION;
      let startTime = null;
      let animationId = null;

      // Show toast with stagger
      setTimeout(() => {
        toast.classList.add("show");
        startTimer();
      }, index * 150);

      function startTimer() {
        if (isPaused) return;

        startTime = Date.now();
        animateProgress();
      }

      function animateProgress() {
        if (isPaused) return;

        const elapsed = Date.now() - startTime;
        const remaining = Math.max(0, timeRemaining - elapsed);
        const progress = (1 - remaining / TOAST_DURATION) * 100;

        if (progressBar) {
          progressBar.style.width = `${progress}%`;
        }

        if (remaining <= 0) {
          hideToast();
        } else {
          animationId = requestAnimationFrame(animateProgress);
        }
      }

      function pauseTimer() {
        if (!isPaused && startTime) {
          isPaused = true;
          timeRemaining = Math.max(0, timeRemaining - (Date.now() - startTime));
          if (animationId) {
            cancelAnimationFrame(animationId);
          }
        }
      }

      function resumeTimer() {
        if (isPaused) {
          isPaused = false;
          startTimer();
        }
      }

      function hideToast() {
        if (animationId) {
          cancelAnimationFrame(animationId);
        }
        toast.classList.remove("show");
        setTimeout(() => {
          if (toast.parentNode) {
            toast.remove();
          }
        }, 400);
      }

      // Event listeners
      toast.addEventListener("mouseenter", () => {
        isHovered = true;
        pauseTimer();
      });

      toast.addEventListener("mouseleave", () => {
        isHovered = false;
        resumeTimer();
      });

      if (closeButton) {
        closeButton.addEventListener("click", (e) => {
          e.preventDefault();
          hideToast();
        });
      }

      // Handle visibility change (pause when tab not active)
      document.addEventListener("visibilitychange", () => {
        if (document.hidden) {
          pauseTimer();
        } else if (!isHovered) {
          resumeTimer();
        }
      });
    }

    // Initialize all toasts
    toasts.forEach((toast, index) => {
      createToastManager(toast, index);
    });
  });

  // Function to create dynamic toasts (for JavaScript usage)
  function showToast(message, category = "info", duration = 6000) {
    const container = document.getElementById("toast-container");
    if (!container) return;

    const iconMap = {
      success: "fa-check-circle",
      danger: "fa-exclamation-circle",
      error: "fa-exclamation-circle",
      warning: "fa-exclamation-triangle",
      info: "fa-info-circle",
    };

    const toast = document.createElement("div");
    toast.className = `toast toast--${category}`;
    toast.innerHTML = `
          <div class="toast__content">
            <div class="toast__icon">
              <i class="fa-solid ${iconMap[category] || iconMap.info}"></i>
            </div>
            <p class="toast__message">${message}</p>
          </div>
          <button class="toast__close" aria-label="Close notification">&times;</button>
          <div class="toast__progress"></div>
        `;

    container.appendChild(toast);

    // Trigger show animation
    setTimeout(() => toast.classList.add("show"), 50);

    // Auto-hide
    const timer = setTimeout(() => {
      toast.classList.remove("show");
      setTimeout(() => toast.remove(), 400);
    }, duration);

    // Close button
    const closeBtn = toast.querySelector(".toast__close");
    closeBtn.addEventListener("click", () => {
      clearTimeout(timer);
      toast.classList.remove("show");
      setTimeout(() => toast.remove(), 400);
    });

    return toast;
  }

  // Make showToast globally available
  window.showToast = showToast;

  // --- Dismiss PWA Prompt ---
  const pwaPrompt = document.getElementById("ios-pwa-prompt");
  const closePwaPromptBtn = document.getElementById("close-pwa-prompt");

  if (pwaPrompt && closePwaPromptBtn) {
    closePwaPromptBtn.addEventListener("click", () => {
      pwaPrompt.style.display = "none";
    });
  }

  if ("serviceWorker" in navigator) {
    window.addEventListener("load", () => {
      navigator.serviceWorker
        .register("../static/service-worker.js")
        .then((registration) => {
          console.log(
            "ServiceWorker registration successful with scope: ",
            registration.scope
          );
        })
        .catch((error) => {
          console.log("ServiceWorker registration failed: ", error);
        });
    });
  }
</script>
<script>
  function showModal() {
    document.getElementById("join-league-overlay").classList.remove("hidden");
    document.body.style.overflow = "hidden"; // Prevent background scrolling
  }

  function hideModal() {
    document.getElementById("join-league-overlay").classList.add("hidden");
    document.body.style.overflow = "auto"; // Re-enable background scrolling
  }

  // Close modal when clicking outside
  document
    .getElementById("join-league-overlay")
    .addEventListener("click", function (e) {
      if (e.target === this) {
        hideModal();
      }
    });

  // Close modal with Escape key
  document.addEventListener("keydown", function (e) {
    if (e.key === "Escape") {
      hideModal();
    }
  });

  // Form submission demo
  document
    .getElementById("join-league-form")
    .addEventListener("submit", function (e) {
      e.preventDefault();
      const code = document.getElementById("league-code").value;
      const messageEl = document.getElementById("modal-message");

      if (!code.trim()) {
        messageEl.textContent = "Please enter a league code";
        messageEl.className = "modal-message error";
        return;
      }

      if (code.length !== 6) {
        messageEl.textContent = "League code must be 6 characters";
        messageEl.className = "modal-message error";
        return;
      }

      // Simulate success
      messageEl.textContent = "Successfully joined league!";
      messageEl.className = "modal-message success";

      setTimeout(() => {
        hideModal();
        messageEl.className = "modal-message";
        messageEl.textContent = "";
        document.getElementById("league-code").value = "";
      }, 1500);
    });
</script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    // Simple script to trigger the fade-in animation
    const sections = document.querySelectorAll(".fade-in-section");

    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add("is-visible");
          }
        });
      },
      { threshold: 0.1 }
    );

    sections.forEach((section) => {
      observer.observe(section);
    });
  });
</script>
